name: Build and Push Changes

on:
    push:
        branches:
            - main

jobs:
    build-and-push:
        runs-on: ubuntu-latest

        steps:
        - name: Checkout repository
            uses: actions/checkout@v2

        - name: Set up Docker Buildx
            uses: docker/setup-buildx-action@v1

        - name: Build Docker container
            run: docker build -t my-container:latest .

        - name: Run Docker container with volume
            run: docker run -v $(pwd)/Doc:/app/Doc my-container:latest

        - name: Commit and push changes
            run: |
                git config --global user.name 'github-actions[bot]'
                git config --global user.email 'github-actions[bot]@users.noreply.github.com'
                git add Doc
                git commit -m 'Update Doc folder from container'
                git push
